# unixコマンド

## 自分用のunixコマンドメモ


### ログイン
ssh を使用して、サーバーにログインする。
ログインする場合、ssh を使用する。
sshに続いて、username@servernameを入れると、
パスワードを聞かれるのでパスワードを入力するとログインできる。

    ssh username@servername


### ログアウト
ログアウトする場合は、exitコマンドを使用する。

    exit


### パスワード変更
ssh で接続している時に、passwd と入力するとパスワード変更を求められる。
現在のパスワードと、新しいパスワードを入れると変更できる。

    passwd


### ディレクトリの位置表示
現在いるディレクトリの位置を表示するには、 pwd コマンドを使用する。

    pwd


### ディレクトリの移動
ディレクトリの移動をする場合、 cdコマンドで移動する。

    cd 移動先のフォルダ名   //移動先のフォルダに移動
    cd                   //Homeフォルダに移動
    cd ../               //一つ上のフォルダに移動
    cd ../../            //二つ上のフォルダに移動


### ディレクトリの中身の確認
ディレクトリの中身を確認する場合、 lsコマンドを使用する。

    ls                   //ディレクトリの中身を表示
    ls -l                //ディレクトリの中身のファイルの権限や作成日時などを表示
    ls -a                //ディレクトリの不過視ファイルも含めて表示

### ファイルの日付を変更(touch)

    -a アクセス時刻を修正する
    -m データ更新時刻を修正する

    touch myfile //myfileのタイムスタンプを現在時刻にする

    touch newfile //新しい空のファイルを作成する

### パーミッションの変更
ディレクトリやファイルのパーミッションを変更する
chmod コマンドを使用して、read,write,excuteの権限を変更する

    chmod ___          //3桁の数字を記載する
    read: 4
    write: 2
    xecute 1
    chmod 731          //d rwx _wx __x と同じ意味

#### ファイルを削除不可にする(chmod -w sampfile)

    chmod -w sampfile //書き込み禁止(-w)にする
    //　-w(書き込み禁止)のため、vi などで編集ができなくなる
    // 但し、削除は可能

### ディレクトリの作成・削除
ディレクトリを作成する場合は、　mkdirコマンドを使用する
ディレクリを削除する場合は、　rmdirコマンドを使用する

    mkdir 作成ディレクトリ名
    rmdir 削除ディレクトリ名

### ファイルの作成・削除
ファイルの作成には、 vi ファイル名で作成
ファイルの削除には、 rm　ファイル名で削除

    vi test.txt         //test.txtを作成
    rm test.txt         //test.txtを削除

#### ファイルを削除(rm)

    rm ファイル名s

    -i //確認しながら削除する
    -f //一切の確認メッセージなしで強制削除
    -r //指定ディレクトリを丸ごと削除

    rm file1 //fileを削除する
    rm file1 file2 //file1とfile2を削除する
    rm -r mydir //ディレクトリの削除


### ファイルのコピー・移動（名前変更）
ファイルのコピーには、 cp コピー元ファイル名 コピーされた新規ファイル名 で複製
ファイルの移動には、 mv 移動元ファイル名 移動先ファイル名で移動

    cp test.txt test2.txt       //test.txtを元に、test2.txtを作成
    cp test.txt test/test3.txt  //testフォルダの中に、test3.txtを作成
    mv test.txt test/       　　//test.txtを testフォルダの中に移動
    mv test.txt test2.txt      //test.txtを、test2.txtに名前変更

#### ファイルをコピーする(cp)

    cp ファイル名1 ファイル名2 //ファイル1をファイル2にコピーする
    cp ファイル名s ディレクトリ名 //ファイルを指定ディレクトリにコピー
    cp -r ディレクトリ1 ディレクトリ2 //ディレクトリ1を丸ごとディレクトリ2にコピー

    -i  //確認しながらコピーする
    -p  //ファイル属性を維持したままコピーする
    -r  //ディレクトリ内容をコピーする

    cp file1 file2 //file1をfile2にコピー
    cp file1 mydir2 //file1をmydir2に同じ名前でコピー
    cp file1 mydir2/file2 //file1をmydir2にfile2という名でコピー
    cp s* mydir2 //sで始まる全ファイルを mydir2にコピー
    cp mydir2/* . //mydir2の全ファイルを、カレントディレクトリにコピー
    cp -r mydir1 mydir2 //mydir1の中身をmydir2に丸ごとコピー

#### ファイルの移動とファイル名を変更する(mv)

    mv ファイル名1 ファイル名2 //ファイル1をファイル2に名前変更する
    mv ファイル名s ディレクトリ名 //ファイルを指定ディレクトリに移動

    -f //強制書き込みをする

    mv fiel1 mydir //１個のファイルをmydirディレクトリに移動
    mv file1 mydir/file2 //移動するとともに、ファイル名を変更する
    mv file* mydir //file* の一致するファイル全てを mydirに移動
    mv file1 file2 mydir //複数のファイルを移動
    mv file1 file2 //file1をfile2　に変更


### ファイルの種類を調べる(file)

    file ファイル名 //ファイルの種類を表示

    file * //全ファイルのファイルタイプを見る
    file .* //ドットファイルのファイルタイプを見る


### ファイルの中身の確認
ファイルの中身をすべて確認する場合は、　catコマンドを使用する
ファイルの中身を一画面ずつ確認する場合は、　less / more コマンドを使用する

    cat test.txt         // ファイルの中身をすべて表示
    less test.txt        // ファイルの内容を閲覧
    more test.txt        // ファイルの内容をページ単位で閲覧

#### ファイル内容を表示(cat)

    -n 行番号を表示

    cat myfile1 //myfile1　の中身を表示
    cat myfile1 myfile2 //myfile1 myfile2の中身を表示
    cat -n myfile1 //行番号付きでmyfile1の中身を表示


### ワイルドカードの使い方

ファイルの操作をするときに、＊（アスタリスク）と？（クエスチョンマーク）を
ワイルドカードとして使用することができる。

    rm *.txt     //txtの拡張子がついているファイルをすべて消す
    rm text.t?t  //text.tat text.txt でも消す

### ファイルやディレクトリの検索

ディレクトリやファイルを検索する場合は、findコマンドを使用する。
検索場所を指定した後、 -name でファイル・フォルダ名を指定し、必要であれば -type で d(ディレクトリ)か f(ファイル)を指定する。

    find 検索場所 -name "filename" -type[d][f]

#### ファイルを探す(find)

    -name filename //指定したファイルの名前検索
    -atime n //n*24時間前にアクセスされたファイル検索
    -ctime n //n*24時間前にファイル情報が修正されたファイル
    -mtime n //n*24時間前にデータが修正されたファイル

    find ~ -name myfile1 -print //ホームディレクトリを基点に、myfile1を名前検索し、画面に表示する

    find /hoge -name moge //  /hogeを基点に、mogeファイルを検索
    find . -name file //カレントディレクトリを基点に、fileを検索

#### 検索したファイルを対象にコマンドを実行する

    -exec コマンド名 {} \;
    find . -name hoge.c -exec cat {} \; //見つかったファイルをcatコマンドで表示
    find /tmp -atime +60 -exec rm -i {} \; //　/tmpディレクトリの過去2ヶ月アクセスのないファイルを削除


### ファイルの中身から検索

複数ファイルの中身から文字列を検索する場合は、grepコマンドを使用する。

    grep -[] strings filename  //filename から　strings を検索
    grep 123 *             //自分がいるディレクトリのすべてのファイルから123を検索
    grep -c 123 *          //自分がいるディレクトリのすべてのファイルから123が出る回数をそれぞれカウント
    grep -r 123 *          //自分がいるディレクトリとその下のディレクトリのすべてのファイルから文字列を検索

### コマンドラインのTips

    Tab        //入力途中で Tabを押すと、候補を表示してくれる
    上下の↑↓    //過去のコマンドを表示できる
    history    //過去のコマンドをすべて表示
    !nnn       //historyで見た番号を入れると実行される
    !!         //直前のコマンドをもう一度実行
    !command   //コマンドで始まる直前コマンドを実行してくれる
    !command:p //コマンドで始まる直前のコマンドを表示だけしてくれる

### マニュアルを調べる

    man command   //commandの使い方を教えてくれる


### 時間を調べる

    date

### カレンダーを表示する

    cal  //当月を表示
    cal -y 2013  //一年間のカレンダーを表示

### グラフィカルにディレクトリを表示

ディレクトリをグラフィカルに表示する場合は、treeコマンドを使用する
Macの場合、標準でインストールされていないので、Homebrew でインストールする

    brew install tree
    tree







